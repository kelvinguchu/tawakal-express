<section class="py-10 bg-[#f8faf8] relative overflow-hidden">
  <!-- Background decorative elements -->
  <div class="absolute top-20 right-1/4 w-8 h-8 text-tawakal-green opacity-20 animate-spin-slow">
    <fa-icon [icon]="['fas', 'circle']" [size]="mediumIconSize" class="w-full h-full"></fa-icon>
  </div>
  <div class="absolute bottom-20 left-1/5 w-6 h-6 text-tawakal-blue opacity-20 animate-spin-slow" style="animation-direction: reverse; animation-duration: 15s;">
    <fa-icon [icon]="['fas', 'circle']" [size]="mediumIconSize" class="w-full h-full"></fa-icon>
  </div>
  
  <div class="container mx-auto px-4">
    <!-- Our values section -->
    <div class="mb-16 sm:mb-20 md:mb-24 relative">
      <div class="text-center max-w-3xl mx-auto mb-10 sm:mb-12 md:mb-16">
        <div class="inline-block px-3 py-1.5 sm:px-4 sm:py-2 bg-gradient-to-r from-tawakal-green/10 to-tawakal-blue/10 rounded-full mb-3 sm:mb-4 backdrop-blur-sm border border-white/30">
          <p class="bg-gradient-to-r from-tawakal-green to-tawakal-blue text-transparent bg-clip-text font-medium text-xs sm:text-sm flex items-center justify-center">
            <fa-icon [icon]="['fas', 'heart']" [size]="smallIconSize" class="mr-1.5 sm:mr-2 text-tawakal-green"></fa-icon>
            What Drives Us
          </p>
        </div>
        <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-4 sm:mb-6">
          Our <span class="bg-gradient-to-r from-tawakal-green to-tawakal-blue text-transparent bg-clip-text">Core</span> Values
        </h2>
      </div>

      <!-- Loading state -->
      <div *ngIf="loadingCoreValues" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
        <div *ngFor="let i of [1, 2, 3, 4, 5, 6]" class="relative backdrop-blur-md bg-white/90 rounded-2xl shadow-lg overflow-hidden border border-white/50 p-4 sm:p-6 md:p-8">
          <div class="absolute top-0 left-0 right-0 h-1 bg-gray-200 animate-pulse"></div>
          
          <!-- Loading skeleton -->
          <div class="w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gray-200 animate-pulse mb-4 sm:mb-6"></div>
          <div class="h-6 bg-gray-200 animate-pulse w-1/2 mb-2 sm:mb-3 rounded"></div>
          <div class="h-4 bg-gray-200 animate-pulse w-full mb-2 rounded"></div>
          <div class="h-4 bg-gray-200 animate-pulse w-5/6 mb-2 rounded"></div>
          <div class="h-4 bg-gray-200 animate-pulse w-4/5 rounded"></div>
        </div>
      </div>

      <!-- Error state -->
      <div *ngIf="coreValuesError && !loadingCoreValues" class="p-6 text-center bg-red-50 rounded-lg mb-8">
        <fa-icon [icon]="['fas', 'exclamation-circle']" class="text-red-500 text-2xl mb-2"></fa-icon>
        <p class="text-gray-700">Could not load our core values. Please try again later.</p>
      </div>

      <!-- Core Values Grid -->
      <div *ngIf="!loadingCoreValues && !coreValuesError" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
        <!-- Core Values Cards -->
        <div *ngFor="let value of coreValues; let i = index" 
             class="relative backdrop-blur-md bg-white/90 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group border border-white/50 hover:-translate-y-1">
          <!-- Gradient accent line - Using template for each color -->
          <ng-container [ngSwitch]="value.color">
            <div *ngSwitchCase="'text-tawakal-blue'" class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-tawakal-blue to-tawakal-blue/70"></div>
            <div *ngSwitchCase="'text-tawakal-green'" class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-tawakal-green to-tawakal-green/70"></div>
            <div *ngSwitchCase="'text-amber-500'" class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 to-amber-500/70"></div>
            <div *ngSwitchCase="'text-red-500'" class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-red-500 to-red-500/70"></div>
            <div *ngSwitchDefault class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-tawakal-blue to-tawakal-blue/70"></div>
          </ng-container>

          <!-- Decorative corner accents -->
          <div class="absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-white/50 rounded-tl-lg -mt-0.5 -ml-0.5"></div>
          <div class="absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-white/50 rounded-tr-lg -mt-0.5 -mr-0.5"></div>
          <div class="absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-white/50 rounded-bl-lg -mb-0.5 -ml-0.5"></div>
          <div class="absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-white/50 rounded-br-lg -mb-0.5 -mr-0.5"></div>

          <!-- Subtle gradient background -->
          <div class="absolute inset-0 opacity-10 rounded-xl" 
               [ngStyle]="{
                 'background': 'radial-gradient(circle at 50% 0%, ' + 
                 (value.color === 'text-tawakal-blue' ? '#0075be' : 
                  value.color === 'text-tawakal-green' ? '#2fb457' : 
                  value.color === 'text-amber-500' ? '#f59e0b' : 
                  '#d24935') + ', transparent 70%)'
               }"></div>

          <div class="p-4 sm:p-6 md:p-8 relative z-10">
            <!-- Icon -->
            <div class="w-12 h-12 sm:w-14 sm:h-14 rounded-xl flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform duration-300"
                 [ngClass]="{
                   'bg-tawakal-blue/10': value.color === 'text-tawakal-blue',
                   'bg-tawakal-green/10': value.color === 'text-tawakal-green',
                   'bg-amber-100': value.color === 'text-amber-500',
                   'bg-red-100': value.color === 'text-red-500',
                   'rotate-3': i % 2 === 0,
                   '-rotate-3': i % 2 !== 0
                 }">
              <fa-icon [icon]="getIconProp(value.icon)" 
                      [size]="valueIconSize"
                      [ngClass]="value.color"></fa-icon>
            </div>

            <!-- Title -->
            <h3 class="text-lg sm:text-xl font-bold mb-2 sm:mb-3 transition-colors duration-300"
                [ngClass]="{
                  'group-hover:text-tawakal-blue': value.color === 'text-tawakal-blue',
                  'group-hover:text-tawakal-green': value.color === 'text-tawakal-green',
                  'group-hover:text-amber-500': value.color === 'text-amber-500',
                  'group-hover:text-red-500': value.color === 'text-red-500'
                }">
              {{ value.title }}
            </h3>

            <!-- Description -->
            <p class="text-sm sm:text-base text-zinc-600 mb-3 sm:mb-4">
              {{ value.description }}
            </p>

            <!-- Decorative dots -->
            <div class="absolute bottom-3 sm:bottom-4 right-3 sm:right-4 flex space-x-1">
              <div class="w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full"
                   [ngClass]="{
                     'bg-tawakal-blue/10': value.color === 'text-tawakal-blue',
                     'bg-tawakal-green/10': value.color === 'text-tawakal-green',
                     'bg-amber-100': value.color === 'text-amber-500',
                     'bg-red-100': value.color === 'text-red-500'
                   }"></div>
              <div class="w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full opacity-70"
                   [ngClass]="{
                     'bg-tawakal-blue/10': value.color === 'text-tawakal-blue',
                     'bg-tawakal-green/10': value.color === 'text-tawakal-green',
                     'bg-amber-100': value.color === 'text-amber-500',
                     'bg-red-100': value.color === 'text-red-500'
                   }"></div>
              <div class="w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full opacity-40"
                   [ngClass]="{
                     'bg-tawakal-blue/10': value.color === 'text-tawakal-blue',
                     'bg-tawakal-green/10': value.color === 'text-tawakal-green',
                     'bg-amber-100': value.color === 'text-amber-500',
                     'bg-red-100': value.color === 'text-red-500'
                   }"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Global presence section -->
    <div class="mb-12 sm:mb-16 md:mb-20">
      <div class="text-center mb-6 sm:mb-8">
        <div class="inline-block px-3 py-1.5 sm:px-4 sm:py-2 bg-gradient-to-r from-tawakal-blue/10 to-tawakal-green/10 rounded-full mb-3 sm:mb-4 backdrop-blur-sm border border-white/30">
          <p class="bg-gradient-to-r from-tawakal-blue to-tawakal-green text-transparent bg-clip-text font-medium text-xs sm:text-sm flex items-center justify-center">
            <fa-icon [icon]="['fas', 'map-marker-alt']" [size]="smallIconSize" class="mr-1.5 sm:mr-2 text-tawakal-blue"></fa-icon>
            Worldwide Network
          </p>
        </div>
        <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-4 sm:mb-6">
          Our <span class="bg-gradient-to-r from-tawakal-green to-tawakal-blue text-transparent bg-clip-text">Global</span> <span class="bg-gradient-to-r from-tawakal-blue to-[#d24935] text-transparent bg-clip-text"> Presence</span>
        </h2>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 md:gap-8">
        <div class="bg-white/70 backdrop-blur-md rounded-xl p-5 sm:p-6 shadow-lg border border-white/50 relative overflow-hidden group hover:shadow-xl transition-all duration-300">
          <!-- Decorative corner accents (repeated 3 times, some refactor is needed here) -->
          <div class="absolute top-0 left-0 w-4 sm:w-6 h-4 sm:h-6 border-t-2 border-l-2 border-white/50 rounded-tl-lg -mt-0.5 -ml-0.5"></div>
          <div class="absolute top-0 right-0 w-4 sm:w-6 h-4 sm:h-6 border-t-2 border-r-2 border-white/50 rounded-tr-lg -mt-0.5 -mr-0.5"></div>
          <div class="absolute bottom-0 left-0 w-4 sm:w-6 h-4 sm:h-6 border-b-2 border-l-2 border-white/50 rounded-bl-lg -mb-0.5 -ml-0.5"></div>
          <div class="absolute bottom-0 right-0 w-4 sm:w-6 h-4 sm:h-6 border-b-2 border-r-2 border-white/50 rounded-br-lg -mb-0.5 -mr-0.5"></div>
          
          <div class="relative z-10">
            <h4 class="text-base sm:text-lg font-semibold text-gray-800 mb-3 sm:mb-4 flex items-center">
              <div class="w-7 sm:w-8 h-7 sm:h-8 rounded-lg bg-tawakal-green/10 flex items-center justify-center mr-2 sm:mr-3 group-hover:scale-110 transition-transform duration-300">
                <fa-icon [icon]="['fas', 'map-marker-alt']" [size]="smallIconSize" class="text-tawakal-green"></fa-icon>
              </div>
              Branches & Agents
            </h4>
            <p class="text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4">Our direct presence spans across continents, ensuring reliable service wherever you are.</p>
            
            <!-- Loading state -->
            <div *ngIf="loadingBranchCountries" class="flex flex-wrap gap-1.5 sm:gap-2">
              <span *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8]" 
                    class="px-2 sm:px-3 py-1 h-6 text-xs rounded-full bg-gray-100 animate-pulse w-20 border border-gray-200">
              </span>
            </div>
            
            <!-- Error state -->
            <div *ngIf="branchCountriesError && !loadingBranchCountries" class="p-2 text-center bg-red-50 rounded-lg">
              <p class="text-xs text-gray-700">Could not load branch countries.</p>
            </div>
            
            <!-- Branch countries loaded successfully -->
            <div *ngIf="!loadingBranchCountries && !branchCountriesError" class="flex flex-wrap gap-1.5 sm:gap-2">
              <span *ngFor="let country of branchCountries" 
                    class="px-2 sm:px-3 py-1 text-xs rounded-full bg-tawakal-green/5 text-gray-600 border border-tawakal-green/10 hover:bg-tawakal-green/10 transition-colors duration-200 cursor-default flex items-center">
                <span class="w-4 h-3 mr-1.5 rounded-sm overflow-hidden flex-shrink-0 border border-gray-200">
                  <img [src]="'https://flagcdn.com/' + country.flag + '.svg'" [alt]="country.name + ' flag'" class="w-full h-full object-cover">
                </span>
                {{ country.name }}
              </span>
            </div>
          </div>
        </div>
        
        <div class="bg-white/70 backdrop-blur-md rounded-xl p-5 sm:p-6 shadow-lg border border-white/50 relative overflow-hidden group hover:shadow-xl transition-all duration-300">
          <!-- Decorative corner accents -->
          <div class="absolute top-0 left-0 w-4 sm:w-6 h-4 sm:h-6 border-t-2 border-l-2 border-white/50 rounded-tl-lg -mt-0.5 -ml-0.5"></div>
          <div class="absolute top-0 right-0 w-4 sm:w-6 h-4 sm:h-6 border-t-2 border-r-2 border-white/50 rounded-tr-lg -mt-0.5 -mr-0.5"></div>
          <div class="absolute bottom-0 left-0 w-4 sm:w-6 h-4 sm:h-6 border-b-2 border-l-2 border-white/50 rounded-bl-lg -mb-0.5 -ml-0.5"></div>
          <div class="absolute bottom-0 right-0 w-4 sm:w-6 h-4 sm:h-6 border-b-2 border-r-2 border-white/50 rounded-br-lg -mb-0.5 -mr-0.5"></div>
          
          <div class="relative z-10">
            <h4 class="text-base sm:text-lg font-semibold text-gray-800 mb-3 sm:mb-4 flex items-center">
              <div class="w-7 sm:w-8 h-7 sm:h-8 rounded-lg bg-tawakal-blue/10 flex items-center justify-center mr-2 sm:mr-3 group-hover:scale-110 transition-transform duration-300">
                <fa-icon [icon]="['fas', 'globe']" [size]="smallIconSize" class="text-tawakal-blue"></fa-icon>
              </div>
              Partner Countries
            </h4>
            <p class="text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4">Our strategic partnerships extend our reach to even more countries around the world.</p>
            
            <!-- Loading state -->
            <div *ngIf="loadingPartnerCountries" class="flex flex-wrap gap-1.5 sm:gap-2">
              <span *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8]" 
                    class="px-2 sm:px-3 py-1 h-6 text-xs rounded-full bg-gray-100 animate-pulse w-20 border border-gray-200">
              </span>
            </div>
            
            <!-- Error state -->
            <div *ngIf="partnerCountriesError && !loadingPartnerCountries" class="p-2 text-center bg-red-50 rounded-lg">
              <p class="text-xs text-gray-700">Could not load partner countries.</p>
            </div>
            
            <!-- Partner countries loaded successfully -->
            <div *ngIf="!loadingPartnerCountries && !partnerCountriesError" class="flex flex-wrap gap-1.5 sm:gap-2">
              <span *ngFor="let country of partnerCountries" 
                    class="px-2 sm:px-3 py-1 text-xs rounded-full bg-tawakal-blue/5 text-gray-600 border border-tawakal-blue/10 hover:bg-tawakal-blue/10 transition-colors duration-200 cursor-default flex items-center">
                <span class="w-4 h-3 mr-1.5 rounded-sm overflow-hidden flex-shrink-0 border border-gray-200">
                  <img [src]="'https://flagcdn.com/' + country.flag + '.svg'" [alt]="country.name + ' flag'" class="w-full h-full object-cover">
                </span>
                {{ country.name }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
